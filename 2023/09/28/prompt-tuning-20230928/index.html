<!doctypehtml><html class="theme-next muse use-motion" lang=zh-CN><meta charset=UTF-8><meta content=IE=edge http-equiv=X-UA-Compatible><meta content=width=device-width,initial-scale=1,maximum-scale=1 name=viewport><meta content=#222 name=theme-color><meta content=no-transform http-equiv=Cache-Control><meta content=no-siteapp http-equiv=Cache-Control><link href=/lib/fancybox/source/jquery.fancybox.css?v=2.1.5 rel=stylesheet><link href=/lib/font-awesome/css/font-awesome.min.css?v=4.6.2 rel=stylesheet><link href=/css/main.css?v=5.1.4 rel=stylesheet><link href=/images/apple-touch-icon-next.png?v=5.1.4 rel=apple-touch-icon sizes=180x180><link href=/images/favicon-32x32-next.png?v=5.1.4 rel=icon sizes=32x32 type=image/png><link href=/images/favicon-16x16-next.png?v=5.1.4 rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg?v=5.1.4 rel=mask-icon><meta content=è®ºæ–‡æé€Ÿè¯»,å¤šæ¨¡æ€æ¨¡å‹,è§†é¢‘æœç´¢,æ¨¡æ€å‡è¡¡, name=keywords><link href=/atom.xml rel=alternate title=æœºå™¨å­¦ä¹ æ‚è´§é“ºæ€»åº— type=application/atom+xml><meta content="Prompt Tuningæ˜¯ä¸€ç§PEFTæ–¹æ³•ï¼ˆParameter-Efficient FineTuneï¼‰ï¼Œæ—¨åœ¨ä»¥é«˜æ•ˆçš„æ–¹å¼å¯¹LLMæ¨¡å‹è¿›è¡Œä¸‹æ¸¸ä»»åŠ¡é€‚é…..." name=description><meta content=article property=og:type><meta content="Prompt Tuningâ€”â€”ä¸€ç§é«˜æ•ˆçš„LLMæ¨¡å‹ä¸‹æ¸¸ä»»åŠ¡é€‚é…æ–¹å¼" property=og:title><meta content=https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/index.html property=og:url><meta content=æœºå™¨å­¦ä¹ æ‚è´§é“ºæ€»åº— property=og:site_name><meta content="Prompt Tuningæ˜¯ä¸€ç§PEFTæ–¹æ³•ï¼ˆParameter-Efficient FineTuneï¼‰ï¼Œæ—¨åœ¨ä»¥é«˜æ•ˆçš„æ–¹å¼å¯¹LLMæ¨¡å‹è¿›è¡Œä¸‹æ¸¸ä»»åŠ¡é€‚é…..." property=og:description><meta content=zh_CN property=og:locale><meta content=https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/qrcode.png property=og:image><meta content=https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/imgs/fig1.png property=og:image><meta content=https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/imgs/fig2.png property=og:image><meta content=https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/imgs/fig3.png property=og:image><meta content=https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/imgs/fig4.png property=og:image><meta content=https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/imgs/fig5.png property=og:image><meta content=2023-09-27T16:07:38.000Z property=article:published_time><meta content=2024-10-15T16:37:48.123Z property=article:modified_time><meta content=FesianXu property=article:author><meta content=è®ºæ–‡æé€Ÿè¯» property=article:tag><meta content=å¤šæ¨¡æ€æ¨¡å‹ property=article:tag><meta content=è§†é¢‘æœç´¢ property=article:tag><meta content=æ¨¡æ€å‡è¡¡ property=article:tag><meta content=summary name=twitter:card><meta content=https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/qrcode.png name=twitter:image><script id=hexo.configurations>var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };</script><link href=https://FesianXu.github.io/2023/09/28/prompt-tuning-20230928/ rel=canonical><title>Prompt Tuningâ€”â€”ä¸€ç§é«˜æ•ˆçš„LLMæ¨¡å‹ä¸‹æ¸¸ä»»åŠ¡é€‚é…æ–¹å¼ | æœºå™¨å­¦ä¹ æ‚è´§é“ºæ€»åº—</title><meta content="Hexo 7.3.0" name=generator><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}</style><body itemscope itemtype=http://schema.org/WebPage lang=zh-CN><div class="container sidebar-position-left page-post-detail"><div class=headband></div><header class=header id=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-wrapper><div class=site-meta><div class=custom-logo-site-title><a class=brand href=/ rel=start> <span class=logo-line-before><i></i></span> <span class=site-title>æœºå™¨å­¦ä¹ æ‚è´§é“ºæ€»åº—</span> <span class=logo-line-after><i></i></span> </a></div><p class=site-subtitle></div><div class=site-nav-toggle><button><span class=btn-bar></span> <span class=btn-bar></span> <span class=btn-bar></span></button></div></div><nav class=site-nav><ul class=menu id=menu><li class="menu-item menu-item-home"><a href=/ rel=section> <i class="menu-item-icon fa fa-fw fa-home"></i> <br> Home </a><li class="menu-item menu-item-about"><a href=/about/ rel=section> <i class="menu-item-icon fa fa-fw fa-user"></i> <br> About </a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section> <i class="menu-item-icon fa fa-fw fa-tags"></i> <br> Tags </a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section> <i class="menu-item-icon fa fa-fw fa-th"></i> <br> Categories </a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section> <i class="menu-item-icon fa fa-fw fa-archive"></i> <br> Archives </a><li class="menu-item menu-item-search"><a class=popup-trigger href=javascript:;> <i class="menu-item-icon fa fa-search fa-fw"></i> <br> Search </a></ul><div class=site-search><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class=search-icon> <i class="fa fa-search"></i> </span><span class=popup-btn-close> <i class="fa fa-times-circle"></i> </span><div class=local-search-input-wrapper><input autocomplete=off id=local-search-input placeholder=Searching... spellcheck=false></div></div><div id=local-search-result></div></div></div></nav></div></header><main class=main id=main><div class=main-inner><div class=content-wrap><div class=content id=content><div class=posts-expand id=posts><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><div class=post-block><link href=https://FesianXu.github.io/2023/09/28/prompt-tuning-20230928/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta itemprop=name> <meta itemprop=description> <meta content=/%5Bobject%20Object%5D itemprop=image> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content=æœºå™¨å­¦ä¹ æ‚è´§é“ºæ€»åº— itemprop=name> </span><header class=post-header><h1 itemprop="name headline" class=post-title>Prompt Tuningâ€”â€”ä¸€ç§é«˜æ•ˆçš„LLMæ¨¡å‹ä¸‹æ¸¸ä»»åŠ¡é€‚é…æ–¹å¼</h1><div class=post-meta><span class=post-time> <span class=post-meta-item-icon> <i class="fa fa-calendar-o"></i> </span> <span class=post-meta-item-text>Posted on</span> <time itemprop="dateCreated datePublished" title="Post created" datetime=2023-09-28T00:07:38+08:00> 2023-09-28 </time> </span><span class=post-category> <span class=post-meta-divider>|</span> <span class=post-meta-item-icon> <i class="fa fa-folder-o"></i> </span> <span class=post-meta-item-text>In</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/%E5%A4%9A%E6%A8%A1%E6%80%81%E6%A8%A1%E5%9E%8B/ itemprop=url rel=index> <span itemprop=name>å¤šæ¨¡æ€æ¨¡å‹</span> </a> </span> </span><span class=post-meta-divider>|</span><span class=page-pv><i class="fa fa-file-o"></i> <span class=busuanzi-value id=busuanzi_value_page_pv></span> </span><div class=post-wordcount><span class=post-meta-item-icon> <i class="fa fa-file-word-o"></i> </span><span class=post-meta-item-text>Words count in article:</span><span title="Words count in article"> 2k å­— </span><span class=post-meta-divider>|</span><span class=post-meta-item-icon> <i class="fa fa-clock-o"></i> </span><span class=post-meta-item-text>Reading time â‰ˆ</span><span title="Reading time"> 7 åˆ†é’Ÿ </span></div></div></header><div class=post-body itemprop=articleBody><p>Prompt Tuningæ˜¯ä¸€ç§PEFTæ–¹æ³•ï¼ˆParameter-Efficient FineTuneï¼‰ï¼Œæ—¨åœ¨ä»¥é«˜æ•ˆçš„æ–¹å¼å¯¹LLMæ¨¡å‹è¿›è¡Œä¸‹æ¸¸ä»»åŠ¡é€‚é…... <span id=more></span><div align=right>FesianXu 20230928 at Baidu Search Team</div><h1 id=å‰è¨€>å‰è¨€</h1><p>Prompt Tuningæ˜¯ä¸€ç§PEFTæ–¹æ³•ï¼ˆParameter-Efficient FineTuneï¼‰ï¼Œæ—¨åœ¨ä»¥é«˜æ•ˆçš„æ–¹å¼å¯¹LLMæ¨¡å‹è¿›è¡Œä¸‹æ¸¸ä»»åŠ¡é€‚é…ï¼Œæœ¬æ–‡ç®€è¦ä»‹ç»Prompt Tuningæ–¹æ³•ï¼Œå¸Œæœ›å¯¹è¯»è€…æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœ‰è°¬è¯¯è¯·è§è°…å¹¶è”ç³»æŒ‡å‡ºï¼Œæœ¬æ–‡éµå®ˆCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·è”ç³»ä½œè€…å¹¶æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ã€‚<p><span class="math inline"><mjx-container class=MathJax jax=SVG><svg style="vertical-align: -0.075ex;" viewbox="0 -683 833 716" focusable=false height=1.62ex role=img width=1.885ex xmlns=http://www.w3.org/2000/svg><g fill=currentColor stroke=currentColor stroke-width=0 transform=scale(1,-1)><g data-mml-node=math><g data-mml-node=mi><path d="M46 676Q46 679 51 683H781Q786 679 786 676Q786 674 617 326T444 -26Q439 -33 416 -33T388 -26Q385 -22 216 326T46 676ZM697 596Q697 597 445 597T193 596Q195 591 319 336T445 80L697 596Z" data-c=2207 /></g></g></g></svg></mjx-container></span> è”ç³»æ–¹å¼ï¼š<p>e-mail: FesianXu@gmail.com<p>github: https://github.com/FesianXu<p>çŸ¥ä¹ä¸“æ : è®¡ç®—æœºè§†è§‰/è®¡ç®—æœºå›¾å½¢ç†è®ºä¸åº”ç”¨(https://www.zhihu.com/column/c_1265262560611299328)<p>å¾®ä¿¡å…¬ä¼—å·ï¼šæœºå™¨å­¦ä¹ æ‚è´§é“º3å·åº—<p><img src=/2023/09/28/prompt-tuning-20230928/qrcode.png><hr><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå½“å‰LLMæ˜¯äººå·¥æ™ºèƒ½ç•Œçš„é¦™é¥½é¥½ï¼Œä¼—å¤šå‚å•†å’Œç ”ç©¶è€…éƒ½å¸Œæœ›èƒ½å¤Ÿåœ¨LLMä¸Šè¿›è¡Œåº”ç”¨æ¨å¹¿å’Œç ”ç©¶ï¼Œè¿™å°±éš¾å…éœ€è¦å¯¹LLMè¿›è¡Œä¸‹æ¸¸ä»»åŠ¡çš„é€‚é…ï¼Œæœ€ç†æƒ³çš„æƒ…å†µå½“ç„¶æ˜¯å¯ä»¥ç”¨ç§æœ‰æ•°æ®ï¼Œè¿›è¡Œå…¨ç½‘ç»œç«¯åˆ°ç«¯çš„å¾®è°ƒã€‚ä½†æ˜¯LLMç°åœ¨å‚æ•°é‡å·¨å¤§ï¼Œå¤§éƒ¨åˆ†éƒ½å¤§äº6Bï¼Œæœ‰äº›ç”šè‡³è¾¾åˆ°äº†100Bä»¥ä¸Šï¼Œå³ä¾¿æ˜¯ç«¯åˆ°ç«¯å¾®è°ƒéƒ½éœ€è¦å¤§é‡çš„ç¡¬ä»¶èµ„æºã€‚ PEFT(Parameter-Efficient FineTune)æ—¨åœ¨æœ€é«˜æ•ˆåœ°å¼•å…¥å‚æ•°ï¼Œæ¢ç´¢åˆé€‚çš„è®­ç»ƒæ–¹å¼ï¼Œä½¿å¾—LLMé€‚é…ä¸‹æ¸¸ä»»åŠ¡çš„ä»£ä»·æœ€å°åŒ–ï¼Œè€Œæœ¬æ–‡æåˆ°çš„Prompt Tuning [1] å°±æ˜¯è¿™æ ·ä¸€ä¸ªå·¥ä½œã€‚<p>åœ¨ä»‹ç»è¿™ä¸ªå·¥ä½œä¹‹å‰ï¼Œæˆ‘ä»¬å¾—çŸ¥é“ä»€ä¹ˆæ˜¯promptï¼Œå…³äºpromptçš„å†…å®¹ä¹‹å‰åœ¨åšæ–‡[2]ä¸­æ›¾ç»ä»‹ç»è¿‡ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”¨æŸç§å›ºå®šçš„æ¨¡æ¿æˆ–è€…èŒƒå¼ï¼Œå°è¯•å»è®©LLMå»é€‚é…ä¸‹æ¸¸ä»»åŠ¡ï¼Œä»åœ¨promptä¸­æ˜¯å¦æä¾›ä¾‹å­çš„è§’åº¦ä¸Šçœ‹ï¼Œåˆå¯ä»¥åˆ†ä¸ºone-shot prompt, few-shot prompt, zero-shot promptç­‰ã€‚ä½†æ˜¯ï¼Œåœ¨æ–‡ç« [3]ä¸­æåˆ°è¿‡ï¼Œä¸åŒçš„promptæ¨¡æ¿å¯¹æ€§èƒ½çš„å½±å“å·¨å¤§ï¼Œå¦‚Fig 1.æ‰€ç¤ºï¼Œæˆ‘ä»¬ä¹ŸæŠŠè¿™ç§promptç§°ä¹‹ä¸ºç¡¬æç¤ºè¯ï¼ˆhard-promptï¼‰ã€‚æ—¢ç„¶æœ‰ã€ç¡¬ã€çš„ï¼Œé‚£ä¹ˆå°±è‚¯å®šæœ‰ã€è½¯ã€çš„promptï¼Œsoft-promptæŒ‡çš„æ˜¯æ¨¡å‹å¯ä»¥é€šè¿‡å­¦ä¹ çš„æ–¹å¼å»å­¦ä¹ å‡ºpromptæ¨¡æ¿ï¼Œç»å…¸å·¥ä½œåŒ…æ‹¬P-Tuning [3], prefix prompt [4], soft prompt [5]ï¼Œä»¥åŠæœ¬æ–‡å°†ä¼šä»‹ç»åˆ°çš„prompt tuning [1]ã€‚ <img src=/2023/09/28/prompt-tuning-20230928/imgs/fig1.png><div align=center><b> Fig 1. ä¸åŒçš„promptæ¨¡æ¿å¯¹æ€§èƒ½å½±å“å·¨å¤§ </b></div><p>å¦‚Fig 2.æ‰€ç¤ºï¼Œåœ¨prompt tuningä¸­ï¼Œåœ¨åŸæœ‰hard promptæ¨¡æ¿ä¹‹å‰æ‹¼æ¥äº†è‹¥å¹²ä¸ªå¯å­¦ä¹ çš„tokenï¼Œæˆ‘ä»¬ç”¨ <span class="math inline"><mjx-container class=MathJax jax=SVG><svg style="vertical-align: -0.09ex;" viewbox="0 -853.7 4087.1 893.7" focusable=false height=2.022ex role=img width=9.247ex xmlns=http://www.w3.org/2000/svg><g fill=currentColor stroke=currentColor stroke-width=0 transform=scale(1,-1)><g data-mml-node=math><g data-mjx-texclass=ORD data-mml-node=TeXAtom><g data-mml-node=mi><path d="M400 0Q376 3 226 3Q75 3 51 0H39V62H147V624H39V686H253Q435 686 470 685T536 678Q585 668 621 648T675 605T705 557T718 514T721 483T718 451T704 409T673 362T616 322T530 293Q500 288 399 287H304V62H412V0H400ZM553 475Q553 554 537 582T459 622Q451 623 373 624H298V343H372Q457 344 480 350Q527 362 540 390T553 475Z" data-c=1D40F /></g></g><g data-mml-node=mo transform=translate(1063.8,0)><path d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z" data-c=2208 /></g><g data-mml-node=msup transform=translate(2008.6,0)><g data-mjx-texclass=ORD data-mml-node=TeXAtom><g data-mml-node=mi><path d="M17 665Q17 672 28 683H221Q415 681 439 677Q461 673 481 667T516 654T544 639T566 623T584 607T597 592T607 578T614 565T618 554L621 548Q626 530 626 497Q626 447 613 419Q578 348 473 326L455 321Q462 310 473 292T517 226T578 141T637 72T686 35Q705 30 705 16Q705 7 693 -1H510Q503 6 404 159L306 310H268V183Q270 67 271 59Q274 42 291 38Q295 37 319 35Q344 35 353 28Q362 17 353 3L346 -1H28Q16 5 16 16Q16 35 55 35Q96 38 101 52Q106 60 106 341T101 632Q95 645 55 648Q17 648 17 665ZM241 35Q238 42 237 45T235 78T233 163T233 337V621L237 635L244 648H133Q136 641 137 638T139 603T141 517T141 341Q141 131 140 89T134 37Q133 36 133 35H241ZM457 496Q457 540 449 570T425 615T400 634T377 643Q374 643 339 648Q300 648 281 635Q271 628 270 610T268 481V346H284Q327 346 375 352Q421 364 439 392T457 496ZM492 537T492 496T488 427T478 389T469 371T464 361Q464 360 465 360Q469 360 497 370Q593 400 593 495Q593 592 477 630L457 637L461 626Q474 611 488 561Q492 537 492 496ZM464 243Q411 317 410 317Q404 317 401 315Q384 315 370 312H346L526 35H619L606 50Q553 109 464 243Z" data-c=211D /></g></g><g transform="translate(755,363) scale(0.707)" data-mjx-texclass=ORD data-mml-node=TeXAtom><g data-mml-node=mi><path d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" data-c=1D45D /></g><g data-mml-node=mo transform=translate(503,0)><path d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" data-c=D7 /></g><g data-mml-node=mi transform=translate(1281,0)><path d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z" data-c=1D451 /></g></g></g></g></g></svg></mjx-container></span>è¡¨ç¤ºsoft promptéƒ¨åˆ†ï¼Œå…¶ä¸­<span class="math inline"><mjx-container class=MathJax jax=SVG><svg style="vertical-align: -0.439ex;" viewbox="0 -442 503 636" focusable=false height=1.439ex role=img width=1.138ex xmlns=http://www.w3.org/2000/svg><g fill=currentColor stroke=currentColor stroke-width=0 transform=scale(1,-1)><g data-mml-node=math><g data-mml-node=mi><path d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" data-c=1D45D /></g></g></g></svg></mjx-container></span>ä¸ºæ‹¼æ¥çš„tokenæ•°é‡ï¼Œç”¨<span class="math inline"><mjx-container class=MathJax jax=SVG><svg style="vertical-align: -0.09ex;" viewbox="0 -853.7 4238.6 893.7" focusable=false height=2.022ex role=img width=9.59ex xmlns=http://www.w3.org/2000/svg><g fill=currentColor stroke=currentColor stroke-width=0 transform=scale(1,-1)><g data-mml-node=math><g data-mjx-texclass=ORD data-mml-node=TeXAtom><g data-mml-node=mi><path d="M327 0Q306 3 174 3Q52 3 43 0H33V62H98L162 63L360 333L157 624H48V686H59Q80 683 217 683Q368 683 395 686H408V624H335L393 540L452 458L573 623Q573 624 528 624H483V686H494Q515 683 646 683Q769 683 778 686H787V624H658L575 511Q493 398 493 397L508 376Q522 356 553 312T611 229L727 62H835V0H824Q803 3 667 3Q516 3 489 0H476V62H513L549 63L401 274L247 63Q247 62 292 62H338V0H327Z" data-c=1D417 /></g></g><g data-mml-node=mo transform=translate(1146.8,0)><path d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z" data-c=2208 /></g><g data-mml-node=msup transform=translate(2091.6,0)><g data-mjx-texclass=ORD data-mml-node=TeXAtom><g data-mml-node=mi><path d="M17 665Q17 672 28 683H221Q415 681 439 677Q461 673 481 667T516 654T544 639T566 623T584 607T597 592T607 578T614 565T618 554L621 548Q626 530 626 497Q626 447 613 419Q578 348 473 326L455 321Q462 310 473 292T517 226T578 141T637 72T686 35Q705 30 705 16Q705 7 693 -1H510Q503 6 404 159L306 310H268V183Q270 67 271 59Q274 42 291 38Q295 37 319 35Q344 35 353 28Q362 17 353 3L346 -1H28Q16 5 16 16Q16 35 55 35Q96 38 101 52Q106 60 106 341T101 632Q95 645 55 648Q17 648 17 665ZM241 35Q238 42 237 45T235 78T233 163T233 337V621L237 635L244 648H133Q136 641 137 638T139 603T141 517T141 341Q141 131 140 89T134 37Q133 36 133 35H241ZM457 496Q457 540 449 570T425 615T400 634T377 643Q374 643 339 648Q300 648 281 635Q271 628 270 610T268 481V346H284Q327 346 375 352Q421 364 439 392T457 496ZM492 537T492 496T488 427T478 389T469 371T464 361Q464 360 465 360Q469 360 497 370Q593 400 593 495Q593 592 477 630L457 637L461 626Q474 611 488 561Q492 537 492 496ZM464 243Q411 317 410 317Q404 317 401 315Q384 315 370 312H346L526 35H619L606 50Q553 109 464 243Z" data-c=211D /></g></g><g transform="translate(755,363) scale(0.707)" data-mjx-texclass=ORD data-mml-node=TeXAtom><g data-mml-node=mi><path d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" data-c=1D45B /></g><g data-mml-node=mo transform=translate(600,0)><path d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" data-c=D7 /></g><g data-mml-node=mi transform=translate(1378,0)><path d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z" data-c=1D451 /></g></g></g></g></g></svg></mjx-container></span> è¡¨ç¤ºhard promptéƒ¨åˆ†ã€‚é‚£ä¹ˆï¼Œå®Œæ•´çš„promptå¯è¡¨ç¤ºä¸º<span class="math inline"><mjx-container class=MathJax jax=SVG><svg style="vertical-align: -0.566ex;" viewbox="0 -893.3 7481.2 1143.3" focusable=false height=2.587ex role=img width=16.926ex xmlns=http://www.w3.org/2000/svg><g fill=currentColor stroke=currentColor stroke-width=0 transform=scale(1,-1)><g data-mml-node=math><g data-mml-node=mo><path d="M118 -250V750H255V710H158V-210H255V-250H118Z" data-c=5B /></g><g data-mjx-texclass=ORD data-mml-node=TeXAtom transform=translate(278,0)><g data-mml-node=mi><path d="M400 0Q376 3 226 3Q75 3 51 0H39V62H147V624H39V686H253Q435 686 470 685T536 678Q585 668 621 648T675 605T705 557T718 514T721 483T718 451T704 409T673 362T616 322T530 293Q500 288 399 287H304V62H412V0H400ZM553 475Q553 554 537 582T459 622Q451 623 373 624H298V343H372Q457 344 480 350Q527 362 540 390T553 475Z" data-c=1D40F /></g></g><g data-mml-node=mo transform=translate(1064,0)><path d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 85 94 103T137 121Q202 121 202 8Q202 -44 183 -94T144 -169T118 -194Q115 -194 106 -186T95 -174Q94 -171 107 -155T137 -107T160 -38Q161 -32 162 -22T165 -4T165 4Q165 5 161 4T142 0Q110 0 94 18T78 60Z" data-c=3B /></g><g data-mjx-texclass=ORD data-mml-node=TeXAtom transform=translate(1508.7,0)><g data-mml-node=mi><path d="M327 0Q306 3 174 3Q52 3 43 0H33V62H98L162 63L360 333L157 624H48V686H59Q80 683 217 683Q368 683 395 686H408V624H335L393 540L452 458L573 623Q573 624 528 624H483V686H494Q515 683 646 683Q769 683 778 686H787V624H658L575 511Q493 398 493 397L508 376Q522 356 553 312T611 229L727 62H835V0H824Q803 3 667 3Q516 3 489 0H476V62H513L549 63L401 274L247 63Q247 62 292 62H338V0H327Z" data-c=1D417 /></g></g><g data-mml-node=mo transform=translate(2377.7,0)><path d="M22 710V750H159V-250H22V-210H119V710H22Z" data-c=5D /></g><g data-mml-node=mo transform=translate(2933.4,0)><path d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z" data-c=2208 /></g><g data-mml-node=msup transform=translate(3878.2,0)><g data-mjx-texclass=ORD data-mml-node=TeXAtom><g data-mml-node=mi><path d="M17 665Q17 672 28 683H221Q415 681 439 677Q461 673 481 667T516 654T544 639T566 623T584 607T597 592T607 578T614 565T618 554L621 548Q626 530 626 497Q626 447 613 419Q578 348 473 326L455 321Q462 310 473 292T517 226T578 141T637 72T686 35Q705 30 705 16Q705 7 693 -1H510Q503 6 404 159L306 310H268V183Q270 67 271 59Q274 42 291 38Q295 37 319 35Q344 35 353 28Q362 17 353 3L346 -1H28Q16 5 16 16Q16 35 55 35Q96 38 101 52Q106 60 106 341T101 632Q95 645 55 648Q17 648 17 665ZM241 35Q238 42 237 45T235 78T233 163T233 337V621L237 635L244 648H133Q136 641 137 638T139 603T141 517T141 341Q141 131 140 89T134 37Q133 36 133 35H241ZM457 496Q457 540 449 570T425 615T400 634T377 643Q374 643 339 648Q300 648 281 635Q271 628 270 610T268 481V346H284Q327 346 375 352Q421 364 439 392T457 496ZM492 537T492 496T488 427T478 389T469 371T464 361Q464 360 465 360Q469 360 497 370Q593 400 593 495Q593 592 477 630L457 637L461 626Q474 611 488 561Q492 537 492 496ZM464 243Q411 317 410 317Q404 317 401 315Q384 315 370 312H346L526 35H619L606 50Q553 109 464 243Z" data-c=211D /></g></g><g transform="translate(755,363) scale(0.707)" data-mjx-texclass=ORD data-mml-node=TeXAtom><g data-mml-node=mo><path d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" data-c=28 /></g><g data-mml-node=mi transform=translate(389,0)><path d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" data-c=1D45D /></g><g data-mml-node=mo transform=translate(892,0)><path d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" data-c=2B /></g><g data-mml-node=mi transform=translate(1670,0)><path d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" data-c=1D45B /></g><g data-mml-node=mo transform=translate(2270,0)><path d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" data-c=29 /></g><g data-mml-node=mo transform=translate(2659,0)><path d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" data-c=D7 /></g><g data-mml-node=mi transform=translate(3437,0)><path d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z" data-c=1D451 /></g></g></g></g></g></svg></mjx-container></span>ï¼Œæ¨¡å‹çš„ç›®æ ‡æ—¢å˜ä¸ºäº† <span class="math inline"><mjx-container class=MathJax jax=SVG><svg style="vertical-align: -0.566ex;" viewbox="0 -750 5331.7 1000" focusable=false height=2.262ex role=img width=12.063ex xmlns=http://www.w3.org/2000/svg><g fill=currentColor stroke=currentColor stroke-width=0 transform=scale(1,-1)><g data-mml-node=math><g data-mml-node=mi><path d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" data-c=1D443 /></g><g data-mml-node=mo transform=translate(751,0)><path d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" data-c=28 /></g><g data-mjx-texclass=ORD data-mml-node=TeXAtom transform=translate(1140,0)><g data-mml-node=mi><path d="M605 0Q581 3 434 3Q286 3 262 0H250V62H358V275L126 624H19V686H30Q54 683 189 683Q361 685 370 686H383V624H308L319 608Q330 591 353 556T396 491L484 359L660 623Q660 624 623 624H585V686H595Q613 683 728 683Q832 683 841 686H849V624H742L509 274V62H618V0H605Z" data-c=1D418 /></g></g><g transform="translate(2009,0) translate(0 -0.5)" data-mml-node=mo><path d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z" data-c=7C /></g><g data-mml-node=mo transform=translate(2287,0)><path d="M118 -250V750H255V710H158V-210H255V-250H118Z" data-c=5B /></g><g data-mjx-texclass=ORD data-mml-node=TeXAtom transform=translate(2565,0)><g data-mml-node=mi><path d="M400 0Q376 3 226 3Q75 3 51 0H39V62H147V624H39V686H253Q435 686 470 685T536 678Q585 668 621 648T675 605T705 557T718 514T721 483T718 451T704 409T673 362T616 322T530 293Q500 288 399 287H304V62H412V0H400ZM553 475Q553 554 537 582T459 622Q451 623 373 624H298V343H372Q457 344 480 350Q527 362 540 390T553 475Z" data-c=1D40F /></g></g><g data-mml-node=mo transform=translate(3351,0)><path d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 85 94 103T137 121Q202 121 202 8Q202 -44 183 -94T144 -169T118 -194Q115 -194 106 -186T95 -174Q94 -171 107 -155T137 -107T160 -38Q161 -32 162 -22T165 -4T165 4Q165 5 161 4T142 0Q110 0 94 18T78 60Z" data-c=3B /></g><g data-mjx-texclass=ORD data-mml-node=TeXAtom transform=translate(3795.7,0)><g data-mml-node=mi><path d="M327 0Q306 3 174 3Q52 3 43 0H33V62H98L162 63L360 333L157 624H48V686H59Q80 683 217 683Q368 683 395 686H408V624H335L393 540L452 458L573 623Q573 624 528 624H483V686H494Q515 683 646 683Q769 683 778 686H787V624H658L575 511Q493 398 493 397L508 376Q522 356 553 312T611 229L727 62H835V0H824Q803 3 667 3Q516 3 489 0H476V62H513L549 63L401 274L247 63Q247 62 292 62H338V0H327Z" data-c=1D417 /></g></g><g data-mml-node=mo transform=translate(4664.7,0)><path d="M22 710V750H159V-250H22V-210H119V710H22Z" data-c=5D /></g><g data-mml-node=mo transform=translate(4942.7,0)><path d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" data-c=29 /></g></g></g></svg></mjx-container></span>ã€‚æ­¤æ—¶ï¼ŒLLMçš„å‚æ•°å’Œembeddingå±‚çš„å‚æ•°éƒ½æ˜¯è®¾ç½®ä¸º<strong>ä¸å¯å­¦ä¹ çš„</strong> (â„)ï¼Œæ•´ä¸ªç½‘ç»œåªæœ‰soft promptå±‚æ˜¯å¯å­¦ä¹ çš„ï¼ˆğŸ”¥ï¼‰ï¼Œè¿™æ„å‘³ç€å¾®è°ƒæ¨¡å‹éœ€è¦çš„å†…å­˜å’Œè®¡ç®—ä»£ä»·éƒ½å¤§å¤§å‡å°äº† <a class=footnote-ref href=#fn1 id=fnref1 role=doc-noteref><sup>1</sup></a>ã€‚<p><img src=/2023/09/28/prompt-tuning-20230928/imgs/fig2.png><div align=center><b> Fig 2. prompt tuningåœ¨åŸæœ‰hard-promptæ¨¡æ¿ä¹‹å‰ï¼Œæ‹¼æ¥äº†è‹¥å¹²ä¸ªå¯å­¦ä¹ çš„tokenï¼Œå¹¶å°†å…¶è§†ä¸ºsoft-promptã€‚ </b></div><p>åªéœ€è¦è®¾ç½®ä¸åŒçš„soft promptå°±å¯ä»¥é€‚é…ä¸åŒçš„ä¸‹æ¸¸ä»»åŠ¡äº†ï¼Œå¦‚Fig 3. æ‰€ç¤ºï¼Œåœ¨æ¨¡å‹å‚æ•°é‡è¶³å¤Ÿå¤§ï¼ˆ<span class="math inline"><mjx-container class=MathJax jax=SVG><svg style="vertical-align: -0.312ex;" viewbox="0 -683 2814.8 821" focusable=false height=1.857ex role=img width=6.368ex xmlns=http://www.w3.org/2000/svg><g fill=currentColor stroke=currentColor stroke-width=0 transform=scale(1,-1)><g data-mml-node=math><g data-mml-node=mo><path d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z" data-c=2265 /></g><g data-mml-node=mn transform=translate(1055.8,0)><path d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" data-c=31 /><path d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-c=30 transform=translate(500,0) /></g><g data-mml-node=mi transform=translate(2055.8,0)><path d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z" data-c=1D435 /></g></g></g></svg></mjx-container></span>ï¼‰çš„æ—¶å€™ï¼Œé‡‡ç”¨prompt tuningçš„æ•ˆæœè¶³ä»¥æ¯”è‚©å…¨å‚æ•°å¾®è°ƒï¼Œè€Œä¸”æ‰€éœ€å‚æ•°é‡åªæœ‰åè€…çš„ä¸‡åˆ†ä¹‹ä¸€ï¼Œæ˜¯åå‰¯å…¶å®çš„å‚æ•°é«˜æ•ˆï¼ˆParameter-Efficientï¼‰æ–¹æ³•ã€‚è€Œä¸ç®¡åœ¨ä»€ä¹ˆå°ºåº¦çš„æ¨¡å‹ä¸‹ï¼Œprompt tuningçš„ç»“æœéƒ½è¦è¿œè¿œä¼˜äºhard prompt designçš„ç»“æœï¼Œäººå·¥è®¾è®¡çš„promptæ¨¡æ¿ç¡®å®å¾ˆéš¾ä¸æ¨¡å‹è‡ªå·±å­¦ä¹ å‡ºæ¥çš„ç«äº‰ã€‚ <img src=/2023/09/28/prompt-tuning-20230928/imgs/fig3.png><div align=center><b> Fig 3. ï¼ˆaï¼‰åœ¨10Bä»¥ä¸Šçš„æ¨¡å‹ä¸­ï¼Œé‡‡ç”¨prompt tuningçš„ç»“æœå¯ä»¥å’Œå…¨æ¨¡å‹ç«¯åˆ°ç«¯å¾®è°ƒçš„ç»“æœæŒå¹³ï¼Œï¼ˆbï¼‰è€Œprompt tuningå¢åŠ çš„å‚æ•°é‡åªæœ‰å…¨æ¨¡å‹ç«¯åˆ°ç«¯å¾®è°ƒçš„ä¸‡åˆ†ä¹‹ä¸€ã€‚ </b></div><p>æ­¤å¤–ï¼Œä½œè€…åœ¨è®ºæ–‡ä¸­è¿˜è¿›è¡Œäº†æ›´å¤šå®éªŒå»éªŒè¯prompt tuningçš„æœ‰æ•ˆæ€§å’Œå…¶ä»–ç‰¹æ€§ã€‚ç¬¬ä¸€ä¸ªå°±æ˜¯soft promptæ‰€éœ€è¦çš„é•¿åº¦ï¼Œå¦‚Fig 4. (a)æ‰€ç¤ºï¼Œåœ¨10Bæ¨¡å‹ä¸‹ï¼Œ20-100ä¸ªsoft tokenæ˜¯ä¸€ä¸ªæ¯”è¾ƒåˆé€‚çš„æ•°é‡ï¼Œ20ä¸ªtokenèƒ½æä¾›æœ€å¤§çš„æ€§ä»·æ¯”ã€‚å¦‚ä½•åˆå§‹åŒ–è¿™äº›æ–°å¢çš„soft token embeddingä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡çš„æ€è€ƒçš„é—®é¢˜ï¼Œä½œè€…å°è¯•äº†éšæœºå‡åŒ€åˆå§‹åŒ–ï¼Œä»è¯è¡¨çš„embeddingä¸­é‡‡æ ·ï¼Œä»¥åŠå¯¹äºåˆ†ç±»ä»»åŠ¡è€Œè¨€ï¼Œç”¨labelçš„ç±»åˆ«embeddingè¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚Fig 4. (b) æ‰€ç¤ºï¼Œéšæœºåˆå§‹åŒ–åœ¨æ¨¡å‹å‚æ•°é‡ä¸å¤Ÿçš„æ—¶å€™(< 10B)è¡¨ç°ï¼Œä¸å¦‚ä»è¯è¡¨é‡‡æ ·å’Œlabelåˆå§‹åŒ–çš„æ–¹æ³•ï¼Œä½†å½“æ¨¡å‹å‚æ•°é‡è¶³å¤Ÿå¤§æ—¶ï¼Œéšæœºåˆå§‹åŒ–çš„æ•ˆæœèƒ½å¤Ÿè¾¾åˆ°æœ€å¥½ï¼Œä¼˜äºä»è¯è¡¨ä¸­é‡‡æ ·çš„æ–¹æ³•ã€‚è€ƒè™‘åˆ°æœ¬æ–‡é‡‡ç”¨çš„LLMæ˜¯T5ï¼Œè€ŒT5æ˜¯ä¸€ä¸ªencoder-decoderçš„ç»“æ„ï¼Œåœ¨è®¾è®¡é¢„è®­ç»ƒä»»åŠ¡çš„æ—¶å€™é‡‡ç”¨çš„æ˜¯<code>span corruption + å“¨å…µtoken</code>çš„å½¢å¼ï¼Œå¦‚ï¼š<blockquote><p>Origin: Thank you for inviting me to your party last week</blockquote><blockquote><p>Corrupted: Thank you for [X] me to your party [Y] week</blockquote><blockquote><p>Target: [X] inviting [Y] last [Z]</blockquote><p>è¿™æ ·è®¾è®¡é¢„è®­ç»ƒä»»åŠ¡èƒ½å®ç°encoder-decoderæ¶æ„çš„T5é«˜æ•ˆé¢„è®­ç»ƒï¼Œä½†æ˜¯è¿™æ„å‘³ç€æ¨¡å‹æ²¡æœ‰è§è¿‡è‡ªç„¶è¯­è¨€çš„è¾“å…¥ï¼ˆå› ä¸ºè¾“å…¥æ€»æ˜¯æœ‰å“¨å…µtokenï¼Œæ¯”å¦‚[X]/[Y]ç­‰ï¼‰ï¼Œä¸ºäº†å®ç°T5åˆ°LMçš„é€‚é…ï¼Œåœ¨æœ¬æ–‡ä¸­ä½œè€…å°è¯•å¯¹T5è¿›è¡Œäº†<code>LM Adaptation</code>çš„åè®­ç»ƒï¼šç»§ç»­T5çš„å°‘é‡é¢„è®­ç»ƒï¼Œç»™å®šè‡ªç„¶æ–‡æœ¬ä½œä¸ºè¾“å…¥ï¼Œå°è¯•é¢„æµ‹è‡ªç„¶è¯­è¨€çš„è¾“å‡ºï¼Œè€Œä¸æ˜¯å¸¦æœ‰å“¨å…µtokençš„æ–‡æœ¬ã€‚ æ­¤å¤–ï¼Œä½œè€…è¿˜å°è¯•äº†æ‰€è°“çš„<code>Span Corruption + å“¨å…µ</code>çš„æ–¹æ³•ï¼ŒæŒ‡çš„æ˜¯åœ¨åŸT5æ¨¡å‹åŸºç¡€ä¸Šï¼Œåœ¨åº”ç”¨åˆ°ä¸‹æ¸¸ä»»åŠ¡é¢„æµ‹æ—¶å€™ï¼Œéƒ½ç»™æ‹¼æ¥ä¸Šå“¨å…µtokenï¼Œä»¥å‡å°‘ä¸‹æ¸¸ä»»åŠ¡å’Œé¢„è®­ç»ƒä»»åŠ¡çš„gapã€‚å¦‚Fig 4. ï¼ˆCï¼‰æ‰€ç¤ºï¼Œæ— è®ºé‡‡ç”¨å¤šå¤§å°ºåº¦çš„æ¨¡å‹ï¼Œé‡‡ç”¨äº†LM Adaptationèƒ½å¸¦æ¥æŒç»­çš„å¢ç›Šï¼Œè€ŒSpan Corruptionæˆ–è€…Span Corruption+Sentinelçš„æ–¹æ³•ï¼Œåˆ™åªåœ¨10Bæ¨¡å‹çš„å°ºåº¦ä¸Šèƒ½æœ‰æ¯”è¾ƒå¥½çš„æ•ˆæœï¼ˆç„¶è€Œä»ç„¶æ— æ³•è¶…è¶Šå‰è€…ï¼‰ã€‚é‚£ä¹ˆLM Adaptationéœ€è¦è¿›è¡Œå¤šå°‘stepçš„è®­ç»ƒåˆé€‚å‘¢ï¼Ÿåœ¨Fig 4. (d)ä¸­ï¼Œä½œè€…è¿›è¡Œäº†è‹¥å¹²å°è¯•ï¼Œç»“æœè¡¨æ˜è¶Šå¤šstepå°†ä¼šå¸¦æ¥è¶Šå¤šçš„æ”¶ç›Šï¼Œæœ€ç»ˆä½œè€…é€‰å®šåœ¨100k stepã€‚ <img src=/2023/09/28/prompt-tuning-20230928/imgs/fig4.png><div align=center><b> Fig 4. å¯¹prompt tuningä¸åŒè®¾ç½®çš„æ¢ç´¢å®éªŒã€‚ </b></div><p>é‡‡ç”¨prompt tuningè¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯å¯ä»¥è®©å¤šä¸ªä¸‹æ¸¸ä»»åŠ¡å¤ç”¨åŒä¸€ä¸ªLLMæ¨¡å‹ã€‚åœ¨æ¨¡å‹å¾®è°ƒä¸­ï¼Œå¯¹äºæ¯ä¸ªä¸‹æ¸¸ä»»åŠ¡éƒ½éœ€è¦ç»´æŠ¤ä¸€å¥—ç‹¬ç«‹çš„æ¨¡å‹ï¼Œå¦‚Fig 5. å·¦å›¾æ‰€ç¤ºï¼Œè€Œåœ¨prompt tuningä¸­ï¼Œåˆ™åªéœ€è¦ç»´æŠ¤ä¸€å¥—é™æ€çš„LLMæ¨¡å‹ï¼Œä¸åŒä»»åŠ¡é€šè¿‡ä¸åŒçš„soft promptè¿›è¡ŒåŒºåˆ†å³å¯æ¿€å‘LLMçš„ä¸åŒä¸‹æ¸¸ä»»åŠ¡èƒ½åŠ›ï¼Œå¦‚Fig 5. å³å›¾æ‰€ç¤ºï¼Œå› ä¸ºå¯ä»¥èŠ‚çœå¾ˆå¤šèµ„æºï¼Œè¿™å¯¹äºéƒ¨ç½²æ¥è¯´å¾ˆå‹å¥½ã€‚ <img src=/2023/09/28/prompt-tuning-20230928/imgs/fig5.png><div align=center><b> Fig 5. é‡‡ç”¨prompt tuningçš„æ–¹å¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨åŒä¸€ä¸ªæ¨¡å‹è¦†ç›–å¤šä¸ªä¸‹æ¸¸ä»»åŠ¡ï¼Œå®ç°èµ„æºèŠ‚çœã€‚ </b></div><h1 id=reference>Reference</h1><p>[1]. Lester, Brian, Rami Al-Rfou, and Noah Constant. "The power of scale for parameter-efficient prompt tuning." arXiv preprint arXiv:2104.08691 (2021). aka Prompt Tuning.<p>[2]. https://blog.csdn.net/LoseInVain/article/details/130500648, ã€Šå¢å¼ºå‹è¯­è¨€æ¨¡å‹â€”â€”èµ°å‘é€šç”¨æ™ºèƒ½çš„é“è·¯ï¼Ÿï¼ï¼Ÿã€‹<p>[3]. Xiao Liu, Yanan Zheng, Zhengxiao Du, Ming Ding, Yujie Qian, Zhilin Yang, and Jie Tang. 2021. Gpt understands, too. arXiv:2103.10385. aka p-tuning<p>[4]. Li, Xiang Lisa, and Percy Liang. "Prefix-tuning: Optimizing continuous prompts for generation." arXiv preprint arXiv:2101.00190 (2021). aka prefix tuning<p>[5]. Qin, Guanghui, and Jason Eisner. "Learning how to ask: Querying LMs with mixtures of soft prompts." arXiv preprint arXiv:2104.06599 (2021). aka soft prompt<section class="footnotes footnotes-end-of-document" id=footnotes role=doc-endnotes><hr><ol><li id=fn1><p>ç”±äºå°†LLMçš„å‚æ•°è®¾ç½®æˆä¸ºäº†ä¸å¯å­¦ä¹ ï¼Œå› æ­¤åœ¨åå‘è¿‡ç¨‹ä¸­å¾ˆå¤šå‚æ•°å¹¶ä¸éœ€è¦åœ¨æ˜¾å­˜ä¸­ç»´æŠ¤ã€‚å‡è®¾æ¨¡å‹çš„å‚æ•°é‡ä¸ºXï¼Œé‚£ä¹ˆå¸¸ç”¨çš„Adamä¼˜åŒ–å™¨çš„ä¸¤ä¸ªåŠ¨é‡å°±ä¸éœ€è¦ç»´æŠ¤äº†ï¼ˆå‡å°‘2Xï¼‰ï¼Œæ¿€æ´»å€¼é€šè¿‡é‡è®¡ç®—æŠ€æœ¯ï¼Œå·²ç»ç¼©å‡äº†ç»å¤§éƒ¨åˆ†ï¼Œå¹¶ä¸”æ¢¯åº¦åªéœ€è¦ä¼ é€’åˆ°soft promptéƒ¨åˆ†ï¼Œè€Œä¸éœ€è¦è¿›è¡Œå‚æ•°æ›´æ–°ï¼Œå› æ­¤æ¢¯åº¦ä¹Ÿå¯ä»¥ä¸ç»´æŠ¤ï¼ˆå‡å°‘Xï¼‰ï¼Œå› æ­¤æ‰€éœ€æ˜¾å­˜å‡å°‘äº†3Xï¼Œå¹¶ä¸”å‡å°‘äº†å¯¹å‚æ•°æ›´æ–°çš„è®¡ç®—é‡ã€‚<a class=footnote-back href=#fnref1 role=doc-backlink>â†©ï¸</a></ol></section></div><div><ul class=post-copyright><li class=post-copyright-author><strong>Post author:</strong> FesianXu<li class=post-copyright-link><strong>Post link:</strong> <a title="Prompt Tuningâ€”â€”ä¸€ç§é«˜æ•ˆçš„LLMæ¨¡å‹ä¸‹æ¸¸ä»»åŠ¡é€‚é…æ–¹å¼" href=https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/>https://fesianxu.github.io/2023/09/28/prompt-tuning-20230928/</a><li class=post-copyright-license><strong>Copyright Notice: </strong> All articles in this blog are licensed under <a rel="external nofollow" href=https://creativecommons.org/licenses/by-nc-sa/3.0/ target=_blank>CC BY-NC-SA 3.0</a> unless stating additionally.</ul></div><footer class=post-footer><div class=post-tags><a href=/tags/%E8%AE%BA%E6%96%87%E6%9E%81%E9%80%9F%E8%AF%BB/ rel=tag># è®ºæ–‡æé€Ÿè¯»</a><a href=/tags/%E5%A4%9A%E6%A8%A1%E6%80%81%E6%A8%A1%E5%9E%8B/ rel=tag># å¤šæ¨¡æ€æ¨¡å‹</a><a href=/tags/%E8%A7%86%E9%A2%91%E6%90%9C%E7%B4%A2/ rel=tag># è§†é¢‘æœç´¢</a><a href=/tags/%E6%A8%A1%E6%80%81%E5%9D%87%E8%A1%A1/ rel=tag># æ¨¡æ€å‡è¡¡</a></div><div class=post-nav><div class="post-nav-next post-nav-item"><a title="ã€è®ºæ–‡æé€Ÿè¯»ã€‘ MLP-Mixer ä¸€ç§å…¨è¿æ¥çš„è§†è§‰ç½‘ç»œæ¶æ„" href=/2023/03/25/mlp-mixer-paper-reading-20230324/ rel=next> <i class="fa fa-chevron-left"></i> ã€è®ºæ–‡æé€Ÿè¯»ã€‘ MLP-Mixer ä¸€ç§å…¨è¿æ¥çš„è§†è§‰ç½‘ç»œæ¶æ„ </a></div><span class=post-nav-divider></span><div class="post-nav-prev post-nav-item"><a href=/2023/12/07/video-search-modality-balance-20231207/ rel=prev title=è§†é¢‘æ£€ç´¢ä¸­çš„æ¨¡æ€å‡è¡¡æ–¹æ³•> è§†é¢‘æ£€ç´¢ä¸­çš„æ¨¡æ€å‡è¡¡æ–¹æ³• <i class="fa fa-chevron-right"></i> </a></div></div></footer></div></article><div class=post-spread></div></div></div><div class=comments id=comments><div data-id=city data-uid=MTAyMC82MDMzMS8zNjc5OQ== id=lv-container></div></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside class=sidebar id=sidebar><div class=sidebar-inner><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target=post-toc-wrap>Table of Contents<li class=sidebar-nav-overview data-target=site-overview-wrap>Overview</ul><section class="site-overview-wrap sidebar-panel"><div class=site-overview><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img alt class=site-author-image itemprop=image src=/%5Bobject%20Object%5D><p class=site-author-name itemprop=name><p class="site-description motion-element" itemprop=description></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/archives/%7C%7C%20archive> <span class=site-state-item-count>115</span> <span class=site-state-item-name>posts</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/index.html> <span class=site-state-item-count>36</span> <span class=site-state-item-name>categories</span> </a></div><div class="site-state-item site-state-tags"><a href=/tags/index.html> <span class=site-state-item-count>199</span> <span class=site-state-item-name>tags</span> </a></div></nav><div class="feed-link motion-element"><a href=/atom.xml rel=alternate> <i class="fa fa-rss"></i> RSS </a></div><div class="links-of-author motion-element"><span class=links-of-author-item> <a href=https://github.com/FesianXu target=_blank title=GitHub> <i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class=links-of-author-item> <a href=mailto:FesianXu@gmail.com target=_blank title=E-Mail> <i class="fa fa-fw fa-envelope"></i>E-Mail</a> </span><span class=links-of-author-item> <a href=https://stackoverflow.com/users/7348519/fesianxu target=_blank title=StackOverflow> <i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a> </span></div></div></section><!--noindex--><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class=post-toc><div class=post-toc-content><ol class=nav><li class="nav-item nav-level-1"><a class=nav-link href=#%E5%89%8D%E8%A8%80><span class=nav-number>1.</span> <span class=nav-text>å‰è¨€</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#reference><span class=nav-number>2.</span> <span class=nav-text>Reference</span></a></ol></div></div></section><!--/noindex--></div></aside></div></main><footer class=footer id=footer><div class=footer-inner><div class=copyright>Â© <span itemprop=copyrightYear>2025</span><span class=with-love> <i class="fa fa-user"></i> </span><span class=author itemprop=copyrightHolder>FesianXu</span></div><div class=â€œtheme-infoâ€><div class=â€œpowered-byâ€></div><span class=â€œpost-countâ€> è¯¥ç«™ç‚¹æ–‡ç« å…±381.6kå­—ï¼Œæ¬¢è¿å…‰ä¸´~ </span></div><script async src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><div class=busuanzi-count><script async src=https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js></script><span class=site-uv> <i class="fa fa-user"></i> <span class=busuanzi-value id=busuanzi_value_site_uv></span> </span><span class=site-pv> <i class="fa fa-eye"></i> <span class=busuanzi-value id=busuanzi_value_site_pv></span> </span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i></div></div><script>if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }</script><script src=/lib/jquery/index.js></script><script src=/lib/fastclick/lib/fastclick.min.js></script><script src=/lib/jquery_lazyload/jquery.lazyload.js></script><script src=/lib/velocity/velocity.min.js></script><script src=/lib/velocity/velocity.ui.min.js></script><script src=/lib/fancybox/source/jquery.fancybox.pack.js></script><script src=/js/src/utils.js></script><script src=/js/src/motion.js></script><script src=/js/src/scrollspy.js></script><script src=/js/src/post-details.js></script><script src=/js/src/bootstrap.js></script><script>(function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');</script><script>// Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });</script><script src=/live2dw/lib/L2Dwidget.min.js></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script>